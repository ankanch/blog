<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="personal blog of Long Zhang (kanchisme@gmail.com)">
<meta property="og:type" content="website">
<meta property="og:title" content="akakanch">
<meta property="og:url" content="http://akakanch.com/page/3/index.html">
<meta property="og:site_name" content="akakanch">
<meta property="og:description" content="personal blog of Long Zhang (kanchisme@gmail.com)">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="akakanch">
<meta name="twitter:description" content="personal blog of Long Zhang (kanchisme@gmail.com)">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://akakanch.com/page/3/"/>





  <title>akakanch</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">akakanch</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            Über
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2016/10/09/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/09/" itemprop="url">Android WebView屏蔽网页内的广告</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-10-09T19:56:03+08:00">
                2016-10-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android开发-Android-Studio/" itemprop="url" rel="index">
                    <span itemprop="name">Android开发 / Android Studio</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在做一个新闻聚合应用，类似与RSS。聚合新闻标题，当用户点击后，在应用内（或应用外）打开新闻。</p>
<p>然后，就发现有些站点居然广告掺不忍睹。。。。</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/10/Screenshot_20161009-202650.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/10/Screenshot_20161009-202650-169x300.png" alt="screenshot_20161009-202650"></a><a href="http://115.159.197.66/wp-content/uploads/2016/10/Screenshot_20161009-202659.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/10/Screenshot_20161009-202659-169x300.png" alt="screenshot_20161009-202659"></a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>所以，开始研究如何屏蔽广告，这样才可以让应用更加的美观。</p>
<p>在网上查了一番后，发现可以通过注入Java Script代码，来实现对指定元素的过滤（隐藏或者删除，分别讲这两种，接下来）</p>
<h6 id="法1：通过seletor来隐藏标签。"><a href="#法1：通过seletor来隐藏标签。" class="headerlink" title="法1：通过seletor来隐藏标签。"></a>法1：通过seletor来隐藏标签。</h6><p>首先，我们需要获取指定元素的seletor，获取方法如下图（右键新窗口打开，查看大图）：</p>
<p>Chrome浏览器中F12打开开发者工具，然后右键菜单，copy，copy seletor就可以获得一个唯一的seletor</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/10/222.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/10/222-1024x576.png" alt="222"></a></p>
<p>获取到seletor后，我们对WebView重写onPageFinished函数，加入以下代码：</p>
<p>下面的代码将Java Script注入到webView中，然后，通过这个seletor去寻找相应的元素，并处理。</p>
<p><pre class="lang:java decode:true ">wv.setWebViewClient(new WebViewClient(){</pre></p>
<pre><code>    @Override
    public void onPageFinished(WebView view, String url) {
            //屏蔽百度嵌入广告
            view.loadUrl(&quot;javascript:function setTop(){document.querySelector(&apos;#BAIDU_SSP__wrapper_u2578965_0&apos;).style.display=\&quot;none\&quot;;}setTop();&quot;);
    }
});&lt;/pre&gt;
</code></pre><p>然后，我们再打开网页，就会发现，在网页加载完成后，广告就会自动去掉。</p>
<h6 id="法2：直接删除标签"><a href="#法2：直接删除标签" class="headerlink" title="法2：直接删除标签"></a>法2：直接删除标签</h6><p>通过以下代码，并传入HTML元素的ID值，即可实现直接删除标签：</p>
<p><pre class="lang:java decode:true ">view.loadUrl(“javascript:var con = document.getElementById(‘gamesliderwrap’); con.parentNode.removeChild(con); “);</pre><br>最后，删除广告后我们的页面，就清爽多了。如下图：</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/10/Screenshot_20161009-202817.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/10/Screenshot_20161009-202817-169x300.png" alt="screenshot_20161009-202817"></a> <a href="http://115.159.197.66/wp-content/uploads/2016/10/Screenshot_20161009-202822.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/10/Screenshot_20161009-202822-169x300.png" alt="screenshot_20161009-202822"></a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h5 id="写在最后："><a href="#写在最后：" class="headerlink" title="写在最后："></a>写在最后：</h5><p>由于上面的方法都是在页面加载完成后再注入Java Script代码，再进行广告屏蔽的。</p>
<p>这样，用户还是会先看到广告，所以，我建议在页面加载完成前，显示另外一个fregment提示正在加载，或者直接隐藏WebView，等到页面加载完成后再显示。如下图：</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/10/Screenshot_20161009-210540.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/10/Screenshot_20161009-210540-169x300.png" alt="screenshot_20161009-210540"></a></p>
<p>也可以在onPageStart中写While循环，来循环执行Java Script注入代码。这样HTML元素一显示，就会被处理掉。</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2016/09/28/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/28/" itemprop="url">不到20行简单Python代码获取有道翻译的翻译结果</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-28T12:51:05+08:00">
                2016-09-28
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux-Unix-虚拟主机-VPS/" itemprop="url" rel="index">
                    <span itemprop="name">Linux / Unix /虚拟主机 / VPS</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux-Unix-虚拟主机-VPS/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Python真是一个牛逼的脚本语言。</p>
<p>接下来我来谈谈这个小程序，一个不到20行核心代码的小程序，用户输入对应的英文字母，我们返回相应的中文翻译，当然，中文翻译来自有道翻译。</p>
<p>接下来进入正题。</p>
<p>简单的讲，获取翻译结果就是将目标网页下载下来，然后进行字符串匹配，从网页源代码中匹配出翻译结果就行。</p>
<p>如下图所示：</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/09/QQ图片20160906154407-1.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/09/QQ图片20160906154407-1-1024x576.png" alt=""></a></p>
<p>我们首先打开有道翻译，然后随便翻译点什么，然后，观察url的变化，因为之后我们需要通过这个url来构造我们的翻译查询url：</p>
<p><pre class="lang:python decode:true">query_url=”<a href="http://fanyi.youdao.com/translate?ue=utf-8&amp;keyfrom=baidu&amp;smartresult=dict&amp;type=EN2ZH_CN&amp;i=&quot;" target="_blank" rel="noopener">http://fanyi.youdao.com/translate?ue=utf-8&amp;keyfrom=baidu&amp;smartresult=dict&amp;type=EN2ZH_CN&amp;i=&quot;</a> + word    #word是要翻译的单词</pre><br>然后，我们再看对应的网页源代码，我们可以看到，有道翻译的翻译结果是直接显示在网页源代码里面的，所以，接下来我们需要做的就是，观察翻译结果周围的字符串，看看有什么特点，这里指的是翻译结果周围的字符串应该足够奇葩，保证，网页源代码里面只有一个。</p>
<p>比如我可以看到，这串翻译结果，前面的字符串是 “tgt”:” 后面的是”}]],，简直奇葩，可以保证只有一个。</p>
<p>所以，整个流程应该是：</p>
<p>构造翻译url -&gt; 下载对应的网页 -&gt; 从对应的网页里匹配出字符串</p>
<p>下载网页，我们可以通过urllib的urlopen和read实现。</p>
<p><pre class="lang:python decode:true">page = urllib.request.urlopen(url,timeout=5)<br>html = page.read()<br>html = getHtml(url)<br>html = html.decode(‘utf-8’,’ignore’)   #解码，一定要加上ignore标签，否则可能会出错</pre><br>匹配字符串，我们只需要find对应首尾字符串，然后提取子串即可</p>
<p><pre class="lang:python decode:true">head = “\”tgt\”:\””<br>tail = “\”}]],”<br>start = html.find(head)<br>end = html.find(tail,start)<br>result1 = html[start+len(head):end]</pre><br>所以最终代码下：</p>
<p>如果只提取一个中文意思，且不包括其它附加信息的话，核心代码就只有10行。</p>
<p>所以呢，python简直太6666</p>
<p><pre class="lang:python decode:true">#coding=utf-8<br>import urllib.request<br>import urllib.parse<br>import re</pre></p>
<p>query_url=”<a href="http://fanyi.youdao.com/translate?ue=utf-8&amp;keyfrom=baidu&amp;smartresult=dict&amp;type=EN2ZH_CN&amp;i=&quot;" target="_blank" rel="noopener">http://fanyi.youdao.com/translate?ue=utf-8&amp;keyfrom=baidu&amp;smartresult=dict&amp;type=EN2ZH_CN&amp;i=&quot;</a></p>
<p>def getHtml(url):<br>    page = urllib.request.urlopen(url,timeout=5)<br>    html = page.read()<br>    return html</p>
<p>def getTranslate(word,query_url):</p>
<pre><code>#url = query_url + urllib.parse.urlparse(word)
url = query_url + word
html = getHtml(url)
html = html.decode(&apos;utf-8&apos;,&apos;ignore&apos;)
#寻找翻译结果
head = &quot;\&quot;tgt\&quot;:\&quot;&quot;
tail = &quot;\&quot;}]],&quot;
start = html.find(head)
end = html.find(tail,start)
result1 = html[start+len(head):end]
#寻找附加结果
head =&quot;[\&quot;\&quot;,\&quot;&quot;
tail =&quot;\&quot;]}};&quot;
start = html.find(head)
end = html.find(tail,start)
result2 = html[start+len(head):end]
print(&apos;\r\n\r\n&apos;,word,&apos;\r\n&apos;,result1,&apos;\r\n&apos;,result2,&apos;\r\n\r\n\r\n&apos;)
</code></pre><p>word = “11111”<br>while(word != “EEXXIITT”):<br>    word = input(“enter a word(ENGLISH -&gt; CHINESE) : <strong><strong><strong><strong>_</strong></strong></strong></strong>\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b”)<br>    getTranslate(word,query_url)<br>运行结果：</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/09/IMG20160918211121.jpg" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/09/IMG20160918211121-1024x458.jpg" alt="img20160918211121"></a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2016/09/25/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/25/" itemprop="url">C++调用Python编程遇到的问题解决方案</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-25T23:59:12+08:00">
                2016-09-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/" itemprop="url" rel="index">
                    <span itemprop="name">C++ / Visual C++</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/Linux-Unix-虚拟主机-VPS/" itemprop="url" rel="index">
                    <span itemprop="name">Linux / Unix /虚拟主机 / VPS</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/Linux-Unix-虚拟主机-VPS/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近在研究C++调用Python脚本，照着网上的教程做了一遍，应为我是ubuntu系统，所以，写完代码后，第一关编译就遇到了困难。</p>
<p>报错提示如图：</p>
<p><img src="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-14-32-55.png" alt="2016-09-25-14-32-55"></p>
<p>大概意思是没有找到Python.h文件，WTF？？？？我系统上有python2.6和python3.5，怎么会没有Python.h这个文件呢。后面发现，这样include貌似默认会去Python2.6的目录寻找Python.h，然而我用的Python3.5，所以我吗需要安装Python3.5的dev包，命令如下：</p>
<p><pre class="lang:c++ decode:true">sudo apt-get install python3-dev</pre><br><a href="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-14-35-05.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-14-35-05.png" alt="2016-09-25-14-35-05"></a></p>
<p>然后我又编译了一次，这次终于找到了Python.h头文件，但是又出现了新的错误，如下图所示，提示：PyString_FromString未声明，在网上查到，在Python3k之后，PyString_FromString全部变成了PyBytes_FromString，所以我们只需要将该函数替换为：PyBytes_FromString即可。</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-14-34-21.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-14-34-21.png" alt="2016-09-25-14-34-21"></a></p>
<p>接下来，我们使用以下指令编译该源文件，其中，-I参数指定了python include 库的位置，-L指定了python动态链接库的位置。</p>
<p><pre class="lang:sh decode:true">g++ -o gt cppCallPython.cpp -I/usr/include/python3.5/ -L/u<br>sr/lib/python3.5 -lpython3.5</pre><br><a href="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-14-50-37.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-14-50-37.png" alt="2016-09-25-14-50-37"></a></p>
<p>不幸的是，又报错了，这次错误如上图所示，提示我们ld无法找到lpython这个程序。</p>
<p>在Google一番后，我发现通过以下命令可以获得更加详细的结果，提示具体哪些文件出问题了：</p>
<p><pre class="lang:sh decode:true">sudo ld -lpython3.5 –verbose</pre><br><a href="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-15-47-48.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-15-47-48.png" alt="2016-09-25-15-47-48"></a></p>
<p>从上图请我们可以看到，ld无法正确的获取python相关的很多库文件，看到这么多文件，讲真，我也懵逼了，卧槽，这可怎么办，同样的，网上给出的最佳解决方法是一个一个去创建符号链接，卧槽，可是这么多啊！</p>
<p>无可奈何，我只有用ln -s准备一个一个开始创建符号链接。</p>
<p>可是我们要在那里去找那些文件的具体路径呢？</p>
<p>通过以下命令可以获得一个库文件的具体目录：</p>
<p><pre class="lang:sh decode:true ">locate libpython3.5.so</pre></p>
<p>sudo ln -s /usr/lib/python3.5/config-3.5m-x86_64-linux-gnu/libpython3.5.so<br><img src="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-15-48-27.png" alt="2016-09-25-15-48-27"></p>
<p>然后，我先对第一个文件创建了符号链接，然后尝试编译了下，发现，卧槽，居然成功了！！！</p>
<p>居然只创建了一个符号链接就成功了！！</p>
<p>然后，我们再次进行编译，你会发现，已经可以编译成功了。</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-15-52-50.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/09/2016-09-25-15-52-50.png" alt="2016-09-25-15-52-50"></a></p>
<p>然后就可以愉快的运行自己的C++调用Python的程序了</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2016/09/22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/22/" itemprop="url">Android判断当前系统语言</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-22T23:32:20+08:00">
                2016-09-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android开发-Android-Studio/" itemprop="url" rel="index">
                    <span itemprop="name">Android开发 / Android Studio</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Android开发-Android-Studio/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前在代码中声明了一个static数组存放一些必要数据，后面需要将软件翻译成英文的时候，发现static类型的对象不能通过getString（）方法从XML文件中加载翻译后的字符串，于是便想到再声明一个相同的static数组，这就需要判断用户当前系统语言，然后设置相应的List Control为某一语言。</p>
<p>判断方法如下：</p>
<p><pre class="lang:java decode:true">if(getResources().getConfiguration().locale.getCountry().equals(“CN”))<br>{<br>   //中文，简体，繁体为TW<br>    //在这里加入相应的处理代码<br>}</pre></p>
<p>getResources().getConfiguration().locale.getCountry().equals(“US”)<br>{<br>    //英文（美国）相应的，英国为UK<br>    //在这里加入相应的处理代码<br>}<br>当然，如果你不知道一些语言的代码，你可以通过以下代码打印出来：</p>
<p><pre class="lang:java decode:true  ">System.out(getResources().getConfiguration().locale.getCountry());</pre><br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2016/09/20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/20/" itemprop="url">关联本地仓库和GitHub仓库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-20T19:04:40+08:00">
                2016-09-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux-Unix-虚拟主机-VPS/" itemprop="url" rel="index">
                    <span itemprop="name">Linux / Unix /虚拟主机 / VPS</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux-Unix-虚拟主机-VPS/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本篇文章适用于你已经在本地创建了一个Git仓库，又想在GitHub创建一个Git仓库，并且让这两个仓库进行远程同步。</p>
<p>首先我们需要一个SSH key，这个SSH key可以帮助GitHub判断是哪个用户推送的信息。</p>
<pre class="lang:sh decode:true ">$ ssh-keygen -t rsa -C "注册邮箱"
比如：
$ ssh-keygen -t rsa -C "kanchisme@gmail.com"</pre>
然后用户主目录/.ssh/下有两个文件，id_rsa是私钥，id_rsa.pub是公钥

然后我们需要获取刚才生成的SSH key，打开.ssh下的id_rsa.pub文件，里面的内容就是key的内容。

然后我们复制整个文件的内容，粘贴到GitHub的SSH Key页面，如图：

[![qq%e6%88%aa%e5%9b%be20160920185818](http://115.159.197.66/wp-content/uploads/2016/09/QQ截图20160920185818-1024x553.png)](http://115.159.197.66/wp-content/uploads/2016/09/QQ截图20160920185818.png)

保存后，如果我们要从远程仓库克隆一份到本地可以通过git clone：
<pre class="lang:sh decode:true ">git clone git@github.com:ankanch/xx.git</pre>
如果要将本地库关联远程库，就需要在本地仓库目录运行命令git remote add origin：
<pre class="lang:sh decode:true ">git remote add origin git@github.com:ankanch/xx.git</pre>
推送master分支的所有内容到GitHub：
<pre class="lang:sh decode:true ">git push -u origin master</pre>
第一次使用加上了-u参数，是推送内容并关联分支。

推送成功后就可以看到远程和本地的内容一模一样，下次只要本地作了提交，就可以通过命令：
<pre class="lang:sh decode:true ">git push origin master</pre>
有了推送更新到GitHub，那必然有拉取远程某个分支更新到本地，使用如下命令即可：
<pre class="lang:sh decode:true ">git pull origin master</pre>

<hr>
<p>大家在执行以上命令的时候可能会遇到错误，比如Permission Denied，可能是因为公钥没有复制正确或者SSH Agent未开启的原因。</p>
<p>不过，我觉得，大多数情况都是SSH Agent未开启的原因。</p>
<p>要解决这种问题，请运行Git Bash，注意，是Git Bash，而不是Windows的命令行，然后依次执行以下命令即可：</p>
<p><pre class="lang:sh decode:true ">cd X:\Projects-X\Tieba-zhuaqu<br>eval “$(ssh-agent -s)”<br>ssh-add Q:\SSHkeys\GitHubPull\githubKey<br>git push -u origin master</pre><br>上面的代码首先切换到了本地Git仓库，然后，开启SSH Agent，选择密钥，然后推送更新。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2016/09/19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/19/" itemprop="url">Ubuntu下连接不上WiFi，无法弹出输入密码对话框的解决方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-19T13:13:21+08:00">
                2016-09-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux-Unix-虚拟主机-VPS/" itemprop="url" rel="index">
                    <span itemprop="name">Linux / Unix /虚拟主机 / VPS</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux-Unix-虚拟主机-VPS/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>该问题的情况是：</p>
<p>一直显示正在连接网络，无论是否有密码，而且不会弹出输入密码的对话框。</p>
<p>解决方法：</p>
<p>编辑/etc/modprobe.d/iwlwifi.conf文件即可解决</p>
<p>首先要打开终端，然后输入：</p>
<p><pre class="lang:sh decode:true ">sudo vim  /etc/modprobe.d/iwlwifi.conf</pre><br>在文件末尾添加</p>
<p><pre class="lang:sh decode:true ">options iwlwifi 11n_disable=1</pre><br>然后保存文件，重启系统即可连接上wifi。</p>
<p>我的系统是 Ubuntu 16.04 LTS</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2016/09/17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/17/" itemprop="url">设置Android版Chrome浏览器工具栏颜色，使其与网站配色搭配</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-17T14:17:40+08:00">
                2016-09-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux-Unix-虚拟主机-VPS/" itemprop="url" rel="index">
                    <span itemprop="name">Linux / Unix /虚拟主机 / VPS</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux-Unix-虚拟主机-VPS/网站制作相关/" itemprop="url" rel="index">
                    <span itemprop="name">网站制作相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>大家在访问我博客和其它一些网站的时候会发现，如果你们用的手机版的chrome浏览器，就会发现，即使是在手机端，浏览器标题栏窗口的颜色也会随着网页主题配色改变。而一般手机浏览器工具栏窗口的颜色都是固定的，无法随网页配色改变。</p>
<p>改变浏览器工具栏颜色的作用只有一个，那就是让配色和网页看起来更加的和谐，美观。</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/09/Screenshot_20160917-140845.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/09/Screenshot_20160917-140845-169x300.png" alt="screenshot_20160917-140845">    </a><a href="http://115.159.197.66/wp-content/uploads/2016/09/Screenshot_20160917-140833-1.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/09/Screenshot_20160917-140833-1-169x300.png" alt="screenshot_20160917-140833"></a></p>
<p>&nbsp;</p>
<p>实现方法非常简单，只需要在网站的head标签部分加入如下代码即可实现：</p>
<p><pre class="lang:css decode:true">&lt;meta name=”theme-color” content=”#cc3333”&gt;</pre><br>在content部分填入自己需要设置的颜色即可。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2016/08/31/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/31/" itemprop="url">Python matplotlib pyplot无法显示在中文（显示为方框）解决办法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-08-31T15:27:05+08:00">
                2016-08-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Python/" itemprop="url" rel="index">
                    <span itemprop="name">Python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>无法显示中文，大概如下图中顶部的样子：</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/08/figure_1.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/08/figure_1-300x225.png" alt="figure_1"></a></p>
<p>在网上搜索一番，提到的大多数解决方式都不可用，类似于下面这样：</p>
<p><pre class="lang:python decode:true ">pyplot.title(u”中文”)<br>pyplot.title(u’\u4e2d\u6587’) #  (unicode编码)<br>pyplot.title(‘\xe4\xb8\xad\xe6\x96\x87’) # (utf-8编码)</pre><br>最后在一个博客上找到了解决方法，添加FontProperties 包，然后指定字体。</p>
<p>如下：</p>
<p><pre class="lang:python decode:true ">from matplotlib import pyplot<br>from matplotlib.font_manager import FontProperties<br>font_set = FontProperties(fname=r”c:\windows\fonts\simsun.ttc”, size=15)  </pre></p>
<p>pyplot.title(u’中文’, fontproperties=font_set)<br>然后就完美解决了无法显示中文的问题。</p>
<p><a href="http://115.159.197.66/wp-content/uploads/2016/08/figure_1-1.png" target="_blank" rel="noopener"><img src="http://115.159.197.66/wp-content/uploads/2016/08/figure_1-1-300x225.png" alt="figure_1"></a></p>
<p>&nbsp;</p>
<p>参考来源：<a href="http://blog.csdn.net/garfielder007/article/details/51405139" target="_blank" rel="noopener">http://blog.csdn.net/garfielder007/article/details/51405139</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2016/05/11/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/05/11/" itemprop="url">VC++中Unicode下CString转char*</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-11T22:12:46+08:00">
                2016-05-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/" itemprop="url" rel="index">
                    <span itemprop="name">C++ / Visual C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在进行数据库编程的过程中，需要把_variant_t类型转换成char<em>尝试了各种方法，最后发现把他转换成CString，再有CString转换成char</em>比较简单。</p>
<p>这里我们说的利用宏T2A和W2A进行转换。</p>
<p>顾名思义，T2A是从wchar_t<em>到char</em>的转换；W2A是由宽字符到ANSI字符之间的转换。</p>
<p>转换方式如下，首先需要声明标识符：USES_CONVERSION，然后我们在利用这2个宏进行数据类型转换</p>
<p>代码如下：</p>
<p><pre class="lang:c++ decode:true ">//UNICODE下的CString转char<em><br>        USES_CONVERSION;<br>        strcpy_s(tsc.staname,W2A((LPCTSTR)vname.lVal));<br>        strcpy_s(tsc.parentline, W2A((LPCTSTR)vparent.lVal));</em></pre><br>可以看到在下面这条代码中，我们先把_variant通过LPCTSTR强制类型转换转换成了CString，然后我们再利用 W2A函数将CString转换成char</p>
<p><pre class="lang:c++ decode:true">W2A((LPCTSTR)vname.lVal);</pre><br>正常的转换方式如下：</p>
<p><pre class="lang:c++ decode:true ">USES_CONVERSION;  </pre></p>
<p>   CString cstr = _T(“12345”);<br>   char <em>pbuffer = T2A(cstr);<br>   char </em>pbuf = W2A(cstr);<br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2016/05/05/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/05/05/" itemprop="url">Visual Studio2015 MFC连接Access数据库</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-05-05T23:25:02+08:00">
                2016-05-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/" itemprop="url" rel="index">
                    <span itemprop="name">C++ / Visual C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我选的工程实践题目要求用数据库。在网上查了查MFC使用数据库，发现大多数都是在VC6.0的情况下使用，用的也是Access2010或者之前的版本。而我的环境是VS2015 + Access 2013。所以写下这篇文章备用。</p>
<p>我们讨论的是连接到已经存在的Access 2013数据库。</p>
<p>首先我们需要在MFC对话框的stdafx.h头文件中包含afxdb.h文件，该文件提供了数据库操作</p>
<p><pre class="lang:c++ decode:true ">//下面这句代码要加在#include &lt;afxcontrolbars.h&gt;     // 功能区和控件条的 MFC 支持之下<br>//添加数据库支持</pre></p>
<p>#include &lt;afxdb.h&gt; //新加入头文件，用于CDatabase类<br>然后，我们需要导入msado15.dll，该文件与数据库参数有关，未ADO组件，用于连接数据库</p>
<p><pre class="lang:default decode:true">//msado15.dll我是复制到了项目文件夹下<br>//它的默认路径应该是C:\Program Files\Common Files\System\ado</pre></p>
<p>#import “msado15.dll”  no_namespace  rename(“EOF”,”adoEOF”)<br>接下来就是连接数据库了。</p>
<p>我们先声明 2个变量，一个是_ConnectionPtr类型，另外一个是_RecordsetPtr类型。</p>
<p>_ConnectionPtr是用来connection对象，主要用于数据库的连接，SQL命令执行相关操作</p>
<p>_RecordsetPtr是用来是用来对返回的记录集进行操作的</p>
<p><pre class="lang:c++ decode:true">_ConnectionPtr m_pConnection;//连接access数据库的链接对象<br>_RecordsetPtr m_pRecordset;//记录集对象</pre></p>
<p><pre class="lang:default decode:true">//连接数据库<br>    try<br>    {<br>        CoInitialize(NULL);<br>        m_pConnection = _ConnectionPtr(__uuidof(Connection));<br>        m_pConnection-&gt;ConnectionString = _T(“Provider=Microsoft.ACE.OLEDB.12.0;\<br>Data Source=X:\MetroData\StationData.accdb;”);//这里照着老版的书上写Provider=Microsoft.Jet.OLEDB.4.0;Data<br>                                                //Source= MyAccess.mdb是不对的，这样写只适合2007版以前的access，且路径里面的\必须改成<br>        m_pConnection-&gt;Open(“”, “”, “”, adConnectUnspecified);<br>    }<br>    catch (_com_error e)<br>    {<br>        AfxMessageBox(_T(“数据库连接失败！”));<br>        return FALSE;<br>    }</pre><br>然后运行，我们已经可以正常连接数据库了。</p>
<h6 id="注意："><a href="#注意：" class="headerlink" title="注意："></a><strong>注意：</strong></h6><p>如果提示 【<em>‘Microsoft.ACE.OLEDB.12.0’提供者未注册】</em> 错误，请<a href="https://www.microsoft.com/en-us/download/details.aspx?id=13255" target="_blank" rel="noopener">下载Microsoft Access Database Engine 2010 Redistributable</a></p>
<p>如果连接失败，你可能需要在MFC对话框的App类的构造函数CXXX::CXXXApp()中添加AfxOleInit();用于初始化。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Kanch</p>
              <p class="site-description motion-element" itemprop="description">personal blog of Long Zhang (kanchisme@gmail.com)</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">75</span>
                  <span class="site-state-item-name">Artikel</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">25</span>
                  <span class="site-state-item-name">Kategorien</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">282</span>
                  <span class="site-state-item-name">Tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kanch</span>

  
</div>


  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
