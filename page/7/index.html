<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="personal blog of Long Zhang (kanchisme@gmail.com)">
<meta property="og:type" content="website">
<meta property="og:title" content="akakanch">
<meta property="og:url" content="http://akakanch.com/page/7/index.html">
<meta property="og:site_name" content="akakanch">
<meta property="og:description" content="personal blog of Long Zhang (kanchisme@gmail.com)">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="akakanch">
<meta name="twitter:description" content="personal blog of Long Zhang (kanchisme@gmail.com)">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://akakanch.com/page/7/"/>





  <title>akakanch</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">akakanch</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Startseite
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            Über
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archiv
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2015/06/22/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/22/" itemprop="url">C++获得可执行程序目录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-06-22T16:30:22+08:00">
                2015-06-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/" itemprop="url" rel="index">
                    <span itemprop="name">C++ / Visual C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="本文介绍了在纯C-与VC下的获得当前可执行文件的路径方法。"><a href="#本文介绍了在纯C-与VC下的获得当前可执行文件的路径方法。" class="headerlink" title="本文介绍了在纯C++与VC下的获得当前可执行文件的路径方法。"></a>本文介绍了在纯C++与VC下的获得当前可执行文件的路径方法。</h2><p>&nbsp;</p>
<h2 id="首先，纯C-方式："><a href="#首先，纯C-方式：" class="headerlink" title="首先，纯C++方式："></a><span style="text-decoration: underline;"><span style="color: #ff0000;"><strong>首先，纯C++方式：</strong></span></span></h2><p>函数原型: <strong><span style="color: #ff00ff;">char <em>getcwd(char </em>dir,int len)</span></strong><br>函数功能: 得到当前路径名称<br>函数返回: 指向dir的指针<br>参数说明: <strong>len</strong>是路径最大长度.<strong>dir</strong>是路径字符串.<br>所属文件: dir.h    (<em>这个头文件可能被命名为 direct.h 或者其他</em>)<br><span style="font-family: monospace, serif;"><span style="font-size: 15px;">示例代码：</span></span></p>
<pre class="lang:c++ decode:true">#include 
#include 
int main()
{
char buffer[MAXPATH];
getcwd(buffer, MAXPATH);
printf("The current directory is: %s", buffer);
return 0;
}</pre>

<h2 id="Visual-C-方式："><a href="#Visual-C-方式：" class="headerlink" title="Visual C++方式："></a><span style="text-decoration: underline;"><span style="color: #ff0000;"><strong>Visual C++方式：</strong></span></span></h2><ul>
<li><strong>函数：</strong><br>DWORD WINAPI GetModuleFileName(_In_opt_ HMODULE hModule,<em>Out</em> LPTSTR lpFilename,_In_ DWORD nSize);</li>
<li><p><strong>功能：</strong><br>获取当前进程已加载模块的文件的完整路径，该模块必须由当前进程加载。</p>
<div class="para">   如果想要获取另一个已加载模块的文件路径，可以使用GetModuleFileNameEx函数。</div>
</li>
<li><p><strong>参数说明</strong><br><strong>hModule Long</strong><br>一个模块的句柄。可以是一个DLL模块，或者是一个应用程序的实例句柄。如果该参数为NULL，该函数返回该应用程序全路径。<br><strong>lpFileName String</strong><br>指定一个字串缓冲区，要在其中容纳文件的用NULL字符中止的路径名，hModule模块就是从这个文件装载进来的<br><strong>nSize Long</strong><br>装载到缓冲区lpFileName的最大字符数量<br>示例代码：<br><pre class="lang:c++ decode:true ">#include<br>#include<br>BOOL CreateSampleService()<br>{<br>TCHAR szPath[MAX_PATH];<br>if( !GetModuleFileName( NULL, szPath, MAX_PATH ) )<br>{<br>printf(“GetModuleFileName failed (%d)n”, GetLastError());<br>return FALSE;<br>}<br>return TRUE;<br>}<br>/<em><br>如果想获得某个正在运行的EXE或者DLL的全路径可以这样写代码<br>GetModuleFileNameEx(hProcess,hInst,lpFile,MAX_PATH);//注意下缓冲区就行了。
</em>/<br></pre><br>&nbsp;</p>
</li>
</ul>
<p>详情查阅MSDN<br><a href="https://msdn.microsoft.com/zh-tw/office/ms683197(v=vs.100" target="_blank" rel="noopener">https://msdn.microsoft.com/zh-tw/office/ms683197(v=vs.100)</a>)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2015/06/21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/21/" itemprop="url">exe文件结构分析(转载)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-06-21T23:09:00+08:00">
                2015-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&nbsp;</p>
<p>EXE文件分为两个部分: <strong><span style="color: #ff0000;">EXE头部</span>（包括一些标识信息和重定位表）和<span style="color: #ff0000;">程序本体</span>（程序本身）. </strong></p>
<p>EXE头部的大小由EXE文件的+08处的字表示, 以节(10h字节)为单位. EXE的14h处的双字是初始的CS:IP, 它是相对于EXE文件的程序本体的. 即程序初始入口在文件中的偏移地址: (word08h+word16h)*10h+word14h</p>
<p>&nbsp;</p>
<h2 id="com和exe文件结构"><a href="#com和exe文件结构" class="headerlink" title="com和exe文件结构"></a>com和exe文件结构</h2><h4 id="1、com文件结构及原理"><a href="#1、com文件结构及原理" class="headerlink" title="1、com文件结构及原理"></a>1、com文件结构及原理</h4><p>com文件结构比较简单，它包含程序的一个绝对映像，即为了运行程序准确的处理器指令和内存中的数据，MS-DOS通过直接把该映像从文件直接复制到内存，从而加载com程序，而不做任何改变。<br>为加载一个com程序，MS-DOS首先试图分配内存，因为com程序必须位于一个64KB的段中，所以com文件的大小不能超过65024（64KB减去用于PSP的256B和用于一个起始堆栈的至少256B）。如果MS-DOS不能为程序、一个PSP、一个起始堆栈分配足够的内存，则分配尝试失败。否则，MS-DOS分配尽可能多的内存（直至所有保留内存），即使com程序本身不能大于64KB。在试图运行另一个程序或分配另外的内存之前，大部分com程序释放任何不需要的内存。<br>分配内存后，MS-DOS在该内存的前256B建立一个PSP，如果PSP中的第一个FCB含有一个有效驱动器标识符，则置AL为00H，否则置位0FFH。MS-DOS还置AH为00或0FFH，这依赖于第二个FCB是否含有一个有效驱动器标识符。建造PSP后，MS-DOS在PSP后立即开始（偏移100H）加载com文件，它置SS、DS和ES为PSP的段地址，接着创建一个堆栈。为创建这个堆栈，在已分配了至少64KB内存的情况下，MS-DOS置SP为0000H；否则它置寄存器比所分配的自己总数大2的值。最后，将0000H进栈（这是为了保证与在早期MS-DOS版本上设计的程序的兼容性）。<br>MS-DOS通过把控制传递给偏移100H处的指令而启动程序。程序设计者必须保证COM文件的第一条指令是程序的入口点。<br>注意：因为程序是在偏移100H处加载，因此所有代码和数据偏移也必须相对于100H。汇编语言程序设计者可通过设置程序的初值为100H而保证这一点（例如通过在源程序的开始使用语句org 100h）。</p>
<h4 id="2、exe文件结构及原理"><a href="#2、exe文件结构及原理" class="headerlink" title="2、exe文件结构及原理"></a>2、exe文件结构及原理</h4><p>exe文件比较复杂，属于一种多段的结构，是DOS最成功和复杂的设计之一。要了解exe文件，首先需要了解exe文件的文件头结构。<br><span style="color: #ff00ff;"><strong>每个exe文件包含一个文件头和一个可重定位程序的映像。</strong>文件头包含MS-DOS用于加载程序的信息，例如程序的大小和寄存器的初始值。文件头还指向一个重定位表，该表包含指向程序映像中可重定位段地址的指针链表。</span>exe文件的文件头结构如表所示：<br>偏移量 含义<br>00h～01h MZ，exe文件标记<br>02h～03h 文件长度除以512的余数<br>04h～05h 文件长度除以512的商<br>06h～07h 重定位项的个数<br>08h～09h 文件头除以16的商<br>0ah～0bh 程序运行所需最小段数<br>0ch～0dh 程序运行所需最大段数<br>0eh～0fh 堆栈段的段值（SS）<br>10h～11h 堆栈段的段值（SP）<br>12h～13h 文件校验和<br>14h～15h 装入模块入口时的IP值<br>16h～17h 装入模块代码相对段值（CS）<br>18h～19h 重定位表，开始位置，以位移地址表示<br>1ah～1bh 覆盖号（程序驻留为零）<br>1ch 重定位表，起点由偏移18h～19h给出，项数由06h～07h标明</p>
<p><strong>程序映像</strong>包含处理代码和程序的初始数据，紧接在文件头之后。它的大小以字节为单位，等于exe文件的大小减去文件头的大小，也等于exHeaderSize的域的值乘以16。MS-DOS通过把该映像直接从文件复制到内存加载exe程序，然后调整定位表中说明的可重定位段地址。<br><strong>定位表</strong>是一个重定位指针数组，每个指向程序映像中的可重定位段地址。文件头中的exRelocItems域说明了数组中指针的个数，exRelocTable域说明了分配表的起始文件偏移量。每个重定位指针由两个16位值组成：偏移量和段值。为加载exe程序，MS-DOS首先读文件头以确定exe标志并计算程序映像的大小，然后它试图申请内存。首先，它计算程序映像文件的大小加上PSP的大小，再加上EXEHEADER结构中的exMinAlloc域说明的内存大小这3者之和。如果总和超过最大可用内存块的大小，则MS-DOS停止加载程序并返回一个出错值。否则，它计算程序映像的大小加上PSP的大小再加上EXEHEADER结构中exMaxAlloc域说明的内存大小之和，如果第二个总和小于最大可用内存块的大小，则MS-DOS分配计算得到的内存量。否则，它分配最大可用内存块。<br>分配完内存后，MS-DOS确定段地址，也称为起始段地址，MS-DOS从此处加载程序映像。如果exMinAlloc域和exMaxAlloc域中的值都为零，则MS-DOS把映像尽可能地加载到内存最高端。否则，它把映像加载到紧挨着PSP域之上。<br>接下来，MS-DOS读取重定位表中的项目调整所有由重定位指针说明的段地址。对于重定位表的每个指针，MS-DOS寻找指针映像中相应的可重定位段地址，并把起始段地址加到它之上。一旦调整完毕，段地址便指向了内存中被加载程序的代码和数据段。MS-DOS在所分配内存的最低部分建造256B的PSP，把AL和AH设置为加载com程序时所设置的值。MS-DOS使用文件头中的值设置SP与SS，调整SS初始值，把起始地址加载到它之上。MS-DOS还把EX和DS设置为PSP的段地址。最后，MS-DOS从程序文件头读取CS和IP的初始值，把起始段地址加到CS之上，把控制转移到位于调整后的地址处的程序。</p>
<p>&nbsp;</p>
<p><span style="color: #808080;">*资料来源 <strong>《计算机病毒及其防治技术》</strong>（程胜利等编著，清华大学出版社）</span></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2015/06/21/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/21/" itemprop="url">C++调用cmd命令，并等待cmd命令执行完后继续运行</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-06-21T15:44:29+08:00">
                2015-06-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/" itemprop="url" rel="index">
                    <span itemprop="name">C++ / Visual C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在利用C++执行cmd命令的时候，有些时候会因为命令类型不同，所需要的时间也不同（如用dir命令枚举C盘下的所有文件就非常耗时）。</p>
<p>因此，我们通常希望让程序在执行完cmd命令后再继续运行。下面有一个小技巧可以帮助我们完成。</p>
<p><strong>基本思路：</strong></p>
<p><span style="color: #ff00ff;"><strong>首先建立要执行的cmd命令</strong></span></p>
<p><span style="color: #ff00ff;"><strong>然后新建线程去执行该cmd命令</strong></span></p>
<p><span style="color: #ff00ff;"><strong>等待cmd执行结束（线程挂起）</strong></span></p>
<p>下面是源代码：</p>
<p><pre class="lang:c++ decode:true ">CString cmd;<br>STARTUPINFO si={sizeof(si)};<br>PROCESS_INFORMATION pi;<br>//要执行的完整CMD命令，一般是一个字符串<br>cmd = “dir”; //枚举文件</pre></p>
<p>//创建线程，执行cmd命令,并等待其结束<br>BOOL fRet1=CreateProcess(NULL,cmd.GetBuffer(),NULL,NULL,FALSE,NORMAL_PRIORITY_CLASS,NULL,NULL,&amp;si,&amp;pi);<br>if(fRect== TRUE)<br>{<br>WaitForSingleObject(pi.hThread,INFINITE);<br>CloseHandle(pi.hThread);<br>CloseHandle(pi.hProcess);<br>}<br>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2015/06/20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/20/" itemprop="url">进程与线程(转载)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-06-20T17:17:52+08:00">
                2015-06-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>&nbsp;</p>
<p><span style="color: #ff0000;"><strong>简单地说：进程如工厂，是程序运行的实例，线程的容器；线程如工厂的车间，是进程中的实际运作单位。</strong></span></p>
<ul>
<li><span style="color: #ff00ff;"><strong>进程（process）</strong></span><strong>是计算机中已运行程序的实体。用户下达运行程序的命令后，就会产生进程。同一程序可产生多个进程（一对多关系），以允许同时有多位用户运行同一程序，却不会相冲突。</strong><br>进程需要一些资源才能完成工作，如CPU使用时间、存储器、文件以及I/O设备，且为依序逐一进行，也就是每个CPU核心任何时间内仅能运行一项进程。</li>
</ul>
<p>在面向进程设计的系统（如早期的UNIX，Linux 2.4及更早的版本）中，进程是程序的基本执行实体；在面向线程设计的系统（如当代多数操作系统、Linux 2.6及更新的版本）中，进程本身不是基本运行单位，而是线程的容器。</p>
<p><span style="text-decoration: underline;"><span style="color: #339966; text-decoration: underline;">程序本身只是指令、数据及其组织形式的描述，进程才是程序的那些指令和数据的真正运行实例。</span></span>若干进程有可能与同一个程序相关系，且每个进程皆可以同步或异步的方式独立运行。现代计算机系统可在同一段时间内以进程的形式将多个程序加载到存储器中，并借由时分复用，以在一个处理器上表现出同时运行的感觉。</p>
<p>同样的，使用多线程技术（多线程即每一个线程都代表一个进程内的一个独立执行上下文）的操作系统或计算机架构，同样程序的平行线程，可在多CPU主机或网络上真正同时运行（在不同的CPU上）。</p>
<ul>
<li><strong><span style="color: #ff00ff;">线程（thread）</span>是操作系统能够进行运算调度的最小单位。它被包含在进程之中，是进程中的实际运作单位。一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务。</strong><br>线程是独立调度和分派的基本单位。线程可以操作系统内核调度的内核线程，如Win32线程；由用户进程自行调度的用户线程；或者由内核与用户进程，如Windows 7的线程，进行混合调度。<br>同一进程中的多条线程将共享该进程中的全部系统资源，如虚拟地址空间，文件描述符和信号处理等等。但同一进程中的多个线程有各自的调用栈（call stack），自己的寄存器环境（register context），自己的线程本地存储（thread-local storage）。<br>一个进程可以有很多线程，每条线程并行执行不同的任务。<br>在多核或多CPU，使用多线程程序设计的好处是显而易见，即提高了程序的执行吞吐率。在单CPU单核的计算机上，使用多线程技术，也可以把进程中负责IO处理、人机交互而常备阻塞的部分与密集计算的部分分开来执行，编写专门的线程执行密集计算，从而提高了程序的执行效率。</li>
</ul>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2015/06/20/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/20/" itemprop="url">UNICODE与ANSI的区别(转载)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-06-20T13:19:28+08:00">
                2015-06-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/" itemprop="url" rel="index">
                    <span itemprop="name">C++ / Visual C++</span>
                  </a>
                </span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/转载/" itemprop="url" rel="index">
                    <span itemprop="name">转载</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>VC6.0下默认的是ANSI编码方式，而vs2005及以上版本中默认的是<a href="https://zh.wikipedia.org/wiki/Unicode" target="_blank" rel="noopener">Unicode</a>编码方式。</strong>这里简单解释下这两种编码方式。</p>
<p>ANSI本来是美国的国家标准，后来渐渐通行于世。<strong>标准的ANSI字符一共有128个，后来扩充到255个，而ANSI使用8位（1个字节）标识每个字符，最多也只能表示255个字符。C++中的char类型就是用来储存ANSI编码的字符的。</strong>char类型有signed char 和unsigned char两种，默认的char是有符号的signed char ，可以表示的字符编码范围是-128~127，无符号的unsigned char可以表示0~255.<br>也就是说，ANSI只能表示最多256个字符（即ASCII值为0-255之间的字符），每个字符用一个字节的空间来存储，对于英文，的确足够，可是对于亚洲地区的复杂语言，这是远远不够的。因此，为了统一一个全世界都可以使用的字符编码，<a href="https://zh.wikipedia.org/wiki/Unicode" target="_blank" rel="noopener">Unicode</a>产生了。</p>
<p><strong><a href="https://zh.wikipedia.org/wiki/Unicode" target="_blank" rel="noopener">UNICODE</a>可以表示65,536(2的16次方)个字符，囊括了世界上所有的字符，每一个字符都有一个单一的<a href="https://zh.wikipedia.org/wiki/Unicode" target="_blank" rel="noopener">UNICODE</a>值，当然也包括ANSI码表示的字符</strong>.</p>
<p><strong>在VC中定义了<span style="color: #ff00ff;"> _T(“”)</span> 宏来表示UNICODE字符串，但在ANSI模式下 _T(“”) 不起任何作用。</strong></p>
<p>不同的是：</p>
<p>ANSI字符只占用一个字节，UNICODE会自动在ANSI值后加入一个值为0的字节。<br>简单的来说，通常Unicode使用两个字节表示每个字符，即每个字符为16位二进制长度。而ANSI编码使用一个字节表示每个字符，即8个二进制位。<br><strong>在Windows的API函数中，每一个涉及到了字符串传递的函数，如最基本的MessageBox（用来显示一个消息框），都有两个版本</strong>,MessageBoxA和MessageBoxW，前者是ANSI版本，后者是宽字符版本，通常就是UNICODE。<br><strong>C++中的<span style="color: #ff00ff;">char</span>是对应ANSI字符的，C++中还有一个基本类型<span style="color: #ff00ff;">wchar_t</span>就是对应UNICODE字符的。</strong><br>编程的时候应该首先决定使用更加通用的宽字符UNICODE，还是占用空间较少的ANSI，个人认为应用软件可以使用UNICODE好一些。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2015/06/19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/19/" itemprop="url">C++多线程编程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-06-19T17:53:12+08:00">
                2015-06-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/" itemprop="url" rel="index">
                    <span itemprop="name">C++ / Visual C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>要用到的头文件 <span style="color: #ff00ff;"><strong>thread.h</strong></span><br><strong>thread</strong> 是C++标准程序库中的一个头文件，定义了C++11标准中的一些表示线程的类 、用于互斥访问的类与方法等，位于std命名空间中。</p>
<p>thread对象表示一个线程。初始化时给出该线程的执行函数（或是可以调用的对象）。线程对象构造后即开始运行。默认情况下，C++11的子线程必须与主线程会合，即在主线程中调用thread::join()函数。这避免了如此情形：子线程还在执行，主线程已经执行结束而撤销。</p>
<h1 id="一些方法及说明："><a href="#一些方法及说明：" class="headerlink" title="一些方法及说明："></a>一些方法及说明：</h1><p><!--DVFMTSC--><strong> 构造函数:</strong><br><!--DVFMTSC-->_ template<!--DVFMTSC--> explicit<!--DVFMTSC--> thread<!--DVFMTSC--> (Fn<!--DVFMTSC-->&amp;amp;<!--DVFMTSC-->&amp;amp;<!--DVFMTSC--> fn,<!--DVFMTSC--> Args<!--DVFMTSC-->&amp;amp;<!--DVFMTSC-->&amp;amp;…<!--DVFMTSC--> args);<!--DVFMTSC--> <em>//这是最常用的构造函数，将要执行的函数作为第一个参数传入，它的参数则作为构造函数2<!--DVFMTSC-->−<!--DVFMTSC-->&gt;n个参数传入<br><!--DVFMTSC--><strong> 成员函数：</strong><br><!--DVFMTSC--></em> thread::hardware_concurrency();_<!--DVFMTSC--> //静态成员函数，返回当前计算机最大的硬件并发线程数目。<br><!--DVFMTSC--> _thread::get_id();<!--DVFMTSC--> <em><!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> //返回线程对象的id<br><!--DVFMTSC--></em> thread::joinable();<!--DVFMTSC--> <!--DVFMTSC--> <em><!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> //检查线程是否可被加入主线程<br><!--DVFMTSC--></em> thread::join();<!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> _<!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> //将线程加入主线程</p>
<h1 id="thread-detach-将线程从主线程中分离"><a href="#thread-detach-将线程从主线程中分离" class="headerlink" title=" thread::detach();       //将线程从主线程中分离"></a><!--DVFMTSC--> <em>thread::detach();</em><!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> <!--DVFMTSC--> //将线程从主线程中分离</h1><p>首先，我们要创建thead对象，并将要执行的函数及参数传入,</p>
<p><code>std::thread thd_a(ShowMsgA,&quot;线程一执行中。。。&quot;);</code></p>
<p>然后继续执行程序其它部分，但一定要将子线程加入主线程</p>
<p><code>thd_a.join();</code></p>
<p>完整代码如下：</p>
<p>`</p>
<p>#include <iostream></iostream></p>
<p>#include <string></string></p>
<p>#include <thread></thread></p>
<p>//线程函数<br>void ShowMsgA(const std::string &amp; msg)<br>{<br>    while (true)<br>    {<br>        std::cout &lt;&lt; msg &lt;&lt; std::endl;<br>    }</p>
<p>}</p>
<p>void ShowMsgB(const std::string &amp; msg)<br>{<br>    while (true)<br>    {<br>        std::cout &lt;&lt; msg &lt;&lt; std::endl;<br>    }</p>
<p>}</p>
<p>void ShowMsgC(const std::string &amp; msg)<br>{<br>    while (true)<br>    {<br>        std::cout &lt;&lt; msg &lt;&lt; std::endl;<br>    }</p>
<p>}</p>
<p>//主函数<br>int main(int argc, char * argv)<br>{<br>    std::cout &lt;&lt; “这个程序演示了C++多线程rn创建3个线程”&lt;&lt;std::endl;<br>    //创建3个线程<br>    std::thread thd_a(ShowMsgA,”线程一执行中。。。”);<br>    std::thread thd_b(ShowMsgB, “线程2执行中。。。”);<br>    std::thread thd_c(ShowMsgC, “线程三执行中。。。”);</p>
<pre><code>std::cout &lt;&lt; &quot;则是主线程&quot; &lt;&lt; std::endl;

//加入主线程，避免主线程自行完毕后，子线程还在
thd_a.join();
thd_b.join();
thd_c.join();

std::cin.get();
return 0;
</code></pre><p>}</p>
<p>`</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2015/06/19/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/19/" itemprop="url">ASP.NET中各种目录表示方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-06-19T11:50:47+08:00">
                2015-06-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/" itemprop="url" rel="index">
                    <span itemprop="name">C++ / Visual C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在ASP.NET中跳转目录，有如下表示方法。</p>
<p>1、”<span style="color: #ff00ff;"><strong>/xxx.xx</strong></span>“ 表示从网站根目录开始,即网站根目录下的xxx.xx文件</p>
<p>2、”<span style="color: #ff00ff;"><strong>./xxx.xx</strong></span>“表示本目录下的xxx.xx</p>
<p>3、”<strong><span style="color: #ff00ff;">../xxx.xx</span></strong>“表示上一级目录中的xxx.xx，当然，”../../xxx.xx”表上上一级目录中的xxx.xx</p>
<p>4、”<span style="color: #ff00ff;"><strong>xxx/</strong></span>“表示当前目录下的xxx文件夹,也相当与”./xxx/“</p>
<p>&nbsp;</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2015/06/18/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/18/" itemprop="url">给WordPress博客添加favicon图标</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-06-18T13:22:00+08:00">
                2015-06-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网站制作相关/" itemprop="url" rel="index">
                    <span itemprop="name">网站制作相关</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>首先解释下什么是favicon（<a href="https://zh.wikipedia.org/wiki/Favicon" target="_blank" rel="noopener">来自维基百科</a>）<br><strong>Favicon</strong>是<em>favorites icon</em>的缩写，亦被称为<strong>website icon</strong>（网页图标）、<strong>page icon</strong>（页面图标）或<strong>urlicon</strong>（<a href="https://zh.wikipedia.org/wiki/URL" title="URL" target="_blank" rel="noopener">URL</a>图标）。Favicon是与某个<a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E7%AB%99" title="网站" target="_blank" rel="noopener">网站</a>或<a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E9%A1%B5" title="网页" target="_blank" rel="noopener">网页</a>相关联的<a href="https://zh.wikipedia.org/wiki/%E5%9B%BE%E6%A0%87" title="图标" target="_blank" rel="noopener">图标</a>。网站设计者可以多种方式创建这种图标，而目前也有很多<a href="https://zh.wikipedia.org/wiki/%E7%BD%91%E9%A1%B5%E6%B5%8F%E8%A7%88%E5%99%A8" title="网页浏览器" target="_blank" rel="noopener">网页浏览器</a>支持此功能。浏览器可以将favicon显示于浏览器的地址栏中，也可置于书签列表的网站名前，还可以放在标签式浏览界面中的页标题前。<br>因此，你需要现拥有一个favicon文件。</p>
<p>你可以自己制作图标文件可以利用 <a href="http://icon-works.com/" target="_blank" rel="noopener">Icon Works</a></p>
<p>也可以将自己已有的图片在线转换成ico图标文件，推荐这个工具 <a href="http://www.bitbug.net/" target="_blank" rel="noopener">在线制作ico图标</a></p>
<p>然后，将你做好的favicon.ico<span style="color: #ff0000;"><strong>放入你web服务器的根目录</strong></span>。（当然也可以使其他目录，我们需要记住路径）</p>
<p>进入wordpress管理后台，打开 <strong><span style="color: #ff00ff;">外观-&gt;编辑</span></strong></p>
<p>选择文件目录中的  <strong><span style="color: #ff00ff;">顶部（header.php）</span></strong>，并打开它。</p>
<p>在&lt;head&gt;&lt;/head&gt;间加入以下代码：<br><span style="color: #808080;"><strong><span class="sc2">&lt;<span class="kw2">link</span> <span class="kw3">rel</span><span class="sy0">=</span><span class="st0">“shortcuticon”</span><span class="kw3">href</span><span class="sy0">=</span><span class="st0">“<a href="http://example.com/favicon.ico&quot;" target="_blank" rel="noopener">http://example.com/favicon.ico&quot;</a></span><span class="kw3">type</span><span class="sy0">=</span><span class="st0">“image/vnd.microsoft.icon”</span>&gt;</span></strong><br><span class="sc2"><strong>&lt;<span class="kw2">link</span> <span class="kw3">rel</span><span class="sy0">=</span><span class="st0">“icon”</span> <span class="kw3">href</span><span class="sy0">=</span><span class="st0">“<a href="http://example.com/favicon.ico&quot;" target="_blank" rel="noopener">http://example.com/favicon.ico&quot;</a></span> <span class="kw3">type</span><span class="sy0">=</span></strong><span class="st0"><strong>“image/vnd.microsoft.icon</strong>“</span>&gt;</span></span></p>
<p>如果你将favicon.ico放在了网站根目录，则把加粗部分换成你的域名即可。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2015/06/17/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/17/" itemprop="url">Windows下列举指定目录下的所有文件，包括子文件夹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-06-17T21:09:02+08:00">
                2015-06-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/" itemprop="url" rel="index">
                    <span itemprop="name">C++ / Visual C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前几天要做个程序，用来查找并替换指定目录下的所有文件里的指定内容。</p>
<p>在如何列举指定文件夹下文件这里卡住了。</p>
<p>经过一番搜索找到了方法。</p>
<hr>
<p>本方法先利用Windows系统命令枚举文件。再进行编程逐一读取处理。</p>
<p>列举指定目录下的所有文件:</p>
<p>首先切换到目标文件夹所在硬盘，如在G盘:</p>
<pre>G:</pre>
再切换到目标文件夹，如G盘下的sc文件夹:
<pre>cd /sc</pre>
再调用获取目录及子目录文件名称的命令，如下：
<pre>dir /s /b /a:−d</pre>
**/b可以去除掉其它的信息,只有路径** 比如： G:/348j.txt

<span style="color: #ff0000;">如果不加/b</span>则是：
<pre>文件夹路径 
创建时间 文件大小    文件名
文件数目 文件夹大小</pre>
**/s的作用则是 显示指定目录和所有子目录中的文件。**

**/a:-d的作用是 只显示指定目录下所有的文件，排除空文件夹。**

下面是对G:/sc文件夹进行枚举的结果：

[![0150617210104](http://139.129.6.122/wp-content/uploads/2015/06/0150617210104.jpg)](http://139.129.6.122/wp-content/uploads/2015/06/0150617210104.jpg)

最后，如果你要进行编程处理这些文件，你需要获得命令行输出，我们通过流重定向，来控制控制台输出枚举结果至文件如下：

<pre class="alignnone">dir /s /b /a:−d >> C:/rusult.txt</pre>

<p>通过&gt;&gt;指向目标文件名来重定向输出流。</p>
<p>命令参考:<a href="http://www.th7.cn/system/win/201503/95130.shtml" target="_blank" rel="noopener">http://www.th7.cn/system/win/201503/95130.shtml</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://akakanch.com/2015/06/16/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kanch">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="akakanch">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/06/16/" itemprop="url">Word文档丢失找回</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-06-16T22:25:45+08:00">
                2015-06-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C-Visual-C/" itemprop="url" rel="index">
                    <span itemprop="name">C++ / Visual C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>当遇到突然停电，电脑的文档还没有保存，怎么办?</p>
<p>其实在你编辑的时候，系统会将编辑中的文档暂时放在“<span style="color: #ff00ff;">C:\Documents and settingsAdministratorApplication DataMicrosoftWord</span>“当中，（<strong>其中Administrator是指你的用户名</strong>），你只要将那些扩展名为<span style="color: #ff00ff;">.asd</span>的文件用Word逐一打开，就能够找到刚才写的文档了。</p>
<p>同时你也可以将Word文档的自动保存时间缩短，打开“Word选项”，将“保存自动回复信息时间间隔”改为很短的时间,比如1分钟，这样能够将损失降到最小。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Kanch</p>
              <p class="site-description motion-element" itemprop="description">personal blog of Long Zhang (kanchisme@gmail.com)</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">75</span>
                  <span class="site-state-item-name">Artikel</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">25</span>
                  <span class="site-state-item-name">Kategorien</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">282</span>
                  <span class="site-state-item-name">Tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kanch</span>

  
</div>


  <div class="powered-by">Erstellt mit  <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
