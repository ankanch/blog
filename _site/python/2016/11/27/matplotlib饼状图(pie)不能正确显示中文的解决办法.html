<h1 id="matplotlib饼状图pie不能正确显示中文的解决办法">matplotlib饼状图(pie)不能正确显示中文的解决办法</h1>

<p>还是之前那个<a href="https://github.com/ankanch/tieba-zhuaqu">tieba-zhuaqu</a>项目，在使用matplotlib绘制饼状图（pie）的时候，发现不能显示中文。</p>

<p><a href="https://raw.githubusercontent.com/ankanch/blog/master/images/wp-content/uploads/2016/11/1480233742985screencapture.png"><img src="https://raw.githubusercontent.com/ankanch/blog/master/images/wp-content/uploads/2016/11/1480233742985screencapture.png" alt="1480233742985screencapture" /></a></p>

<p>（<a href="https://my.oschina.net/Kanonpy/blog/617535?p=1">图片源地址：https://my.oschina.net/Kanonpy/blog/617535?p=1</a>）</p>

<p>之前使用matplotlib绘制其它类型的图片的时候也发现不能显示中文，最后的解决办法都是使用FontProperties() 来设置字体解决问题。</p>

<p>然而发现饼状图貌似不不能简单的通过在plt.pie（）中传入FontProperties() 解决中文乱码的问题。</p>

<p>后面在<a href="https://my.oschina.net/Kanonpy/blog/617535?p=1">https://my.oschina.net/Kanonpy/blog/617535?p=1</a>找到了解决办法，以及出现这个问题的原因。</p>

<p>在调用pie()函数的时候，它会返回字体对象。而且返回的字体对象不支持中文字体。</p>

<p>根据那篇文章里的说法，我们只需要修改pie（）返回的字体对象即可，即将它返回的对象修改为支持中文的字体。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>patches,l_text,p_text = plt.pie(ValueList, labels=Labels, colors=colors,autopct='%1.1f%%',explode=explode ,shadow=True, startangle=90) for font in l_text: font.set_fontproperties(FontProperties(fname=PATH_SUFFIX+'SIMLI.TTF')) plt.title(graphicTitle,fontproperties=font_set,y=1.05)
#重要全局变量 PATH_SUFFIX = os.path.abspath(os.path.join(os.path.dirname(__file__), os.pardir, os.pardir)) PATH_SUFFIX+="\\userX\\" #插件根目录
</code></pre></div></div>

<p>这样，我们便可以正常显示中文字体了。</p>

<p><a href="https://raw.githubusercontent.com/ankanch/blog/master/images/wp-content/uploads/2016/11/用户维度数据分析-互动密切用户（异常）.png"><img src="https://raw.githubusercontent.com/ankanch/blog/master/images/wp-content/uploads/2016/11/用户维度数据分析-互动密切用户（异常）.png" alt="&#x7528;&#x6237;&#x7EF4;&#x5EA6;&#x6570;&#x636E;&#x5206;&#x6790;-&#x4E92;&#x52A8;&#x5BC6;&#x5207;&#x7528;&#x6237;&#xFF08;&#x5F02;&#x5E38;&#xFF09;" /></a></p>

<p>关于在哪里寻找字体：</p>

<p>windows下字体路径：</p>

<p><strong>C:\Windows\Fonts</strong></p>

<p>Ubuntu下字体路径：</p>

<p><strong>/usr/share/fonts</strong></p>

