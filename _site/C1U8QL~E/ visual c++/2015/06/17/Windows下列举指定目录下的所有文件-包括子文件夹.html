<h1 id="windows下列举指定目录下的所有文件包括子文件夹">Windows下列举指定目录下的所有文件，包括子文件夹</h1>

<p>前几天要做个程序，用来查找并替换指定目录下的所有文件里的指定内容。</p>

<p>在如何列举指定文件夹下文件这里卡住了。</p>

<p>经过一番搜索找到了方法。</p>

<p>本方法先利用Windows系统命令枚举文件。再进行编程逐一读取处理。</p>

<p>列举指定目录下的所有文件:</p>

<p>首先切换到目标文件夹所在硬盘，如在G盘:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>G:
</code></pre></div></div>

<p>再切换到目标文件夹，如G盘下的sc文件夹:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /sc
</code></pre></div></div>

<p>再调用获取目录及子目录文件名称的命令，如下：</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dir /s /b /a:−d
</code></pre></div></div>

<p>**/b可以去除掉其它的信息,只有路径** 比如： G:/348j.txt 如果不加/b则是：</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>文件夹路径 
创建时间 文件大小    文件名
文件数目 文件夹大小
</code></pre></div></div>

<p>**/s的作用则是 显示指定目录和所有子目录中的文件。** **/a:-d的作用是 只显示指定目录下所有的文件，排除空文件夹。** 下面是对G:/sc文件夹进行枚举的结果： [![0150617210104](https://raw.githubusercontent.com/ankanch/blog/master/images/wp-content/uploads/2015/06/0150617210104.jpg)](https://raw.githubusercontent.com/ankanch/blog/master/images/wp-content/uploads/2015/06/0150617210104.jpg) 最后，如果你要进行编程处理这些文件，你需要获得命令行输出，我们通过流重定向，来控制控制台输出枚举结果至文件如下：</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dir /s /b /a:−d &gt;&gt; C:/rusult.txt
</code></pre></div></div>

<p>通过&gt;&gt;指向目标文件名来重定向输出流。</p>

<p>命令参考:<a href="http://www.th7.cn/system/win/201503/95130.shtml">http://www.th7.cn/system/win/201503/95130.shtml</a></p>

